<div class="container mx-auto px-6 py-16">
  <div class="text-center mb-12" appScrollAnimate>
    <h1 class="text-4xl md:text-5xl font-bold text-shine mb-4">Admin Panel</h1>
    <p class="text-lg text-cosmic-latte/80 max-w-3xl mx-auto">Manage your store, view analytics, and gain AI-powered insights.</p>
  </div>

  <div class="bg-nebula-blue/50 backdrop-blur-md rounded-lg shadow-2xl shadow-black/40 border border-gray-700" appScrollAnimate>
    <!-- Tabs -->
    <div class="border-b border-gray-700">
      <nav class="flex space-x-1 sm:space-x-4 p-2 sm:p-4" aria-label="Tabs">
        <button (click)="selectTab('dashboard')" 
                [class]="activeTab() === 'dashboard' ? 'bg-gold/10 text-gold' : 'text-gray-400 hover:text-white'"
                class="px-3 py-2 font-medium text-xs sm:text-sm rounded-md transition-colors">
          Dashboard
        </button>
        <button (click)="selectTab('orders')"
                [class]="activeTab() === 'orders' ? 'bg-gold/10 text-gold' : 'text-gray-400 hover:text-white'"
                class="px-3 py-2 font-medium text-xs sm:text-sm rounded-md transition-colors">
          Orders
        </button>
        <button (click)="selectTab('intelligence')"
                [class]="activeTab() === 'intelligence' ? 'bg-gold/10 text-gold' : 'text-gray-400 hover:text-white'"
                class="px-3 py-2 font-medium text-xs sm:text-sm rounded-md transition-colors whitespace-nowrap">
          AI Business Intelligence
        </button>
      </nav>
    </div>

    <!-- Content -->
    <div class="p-4 sm:p-8">
      @if (activeTab() === 'dashboard') {
        <div class="animate-fade-in">
          <h2 class="text-2xl font-bold text-white mb-6">Store Overview</h2>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="bg-onyx/50 p-6 rounded-lg border border-gray-800">
              <h3 class="text-gray-400 text-sm font-medium">Total Revenue</h3>
              <p class="text-3xl font-bold text-white mt-2">${{ displayRevenue().toLocaleString() }}</p>
            </div>
            <div class="bg-onyx/50 p-6 rounded-lg border border-gray-800">
              <h3 class="text-gray-400 text-sm font-medium">Pending Orders</h3>
              <p class="text-3xl font-bold text-white mt-2">{{ displayPendingOrders() }}</p>
            </div>
            <div class="bg-onyx/50 p-6 rounded-lg border border-gray-800">
              <h3 class="text-gray-400 text-sm font-medium">Low Stock Items</h3>
              <p class="text-3xl font-bold text-white mt-2">{{ displayLowStockItems() }}</p>
            </div>
          </div>
        </div>
      } @else if (activeTab() === 'orders') {
        <div class="animate-fade-in">
           <h2 class="text-2xl font-bold text-white mb-6">Manage Orders</h2>
           <div class="overflow-x-auto">
             <table class="min-w-full">
                <thead>
                    <tr class="border-b border-gray-700">
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Order ID</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Total</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">Status</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-800">
                    @for(order of orders(); track order.id) {
                        <tr class="hover:bg-onyx/50">
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-white">{{order.id}}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-300">${{order.total.toLocaleString()}}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm">
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full"
                                      [class]="{
                                        'bg-green-900/50 text-green-300': order.status === 'Delivered',
                                        'bg-blue-900/50 text-blue-300': order.status === 'Agent Dispatched',
                                        'bg-purple-900/50 text-purple-300': order.status === 'Appointment Scheduled',
                                        'bg-yellow-900/50 text-yellow-300': order.status === 'Processing'
                                      }">
                                    {{order.status}}
                                </span>
                            </td>
                        </tr>
                    }
                </tbody>
             </table>
           </div>
        </div>
      } @else if (activeTab() === 'intelligence') {
        <div class="animate-fade-in">
          <h2 class="text-2xl font-bold text-white mb-4">AI Business Intelligence</h2>
           <p class="text-gray-400 mb-6">Leverage AI to analyze market trends and get actionable insights based on your sales data.</p>
           <button (click)="generateInsights()" [disabled]="isLoadingInsights()" class="gold-bg text-black font-bold py-2 px-6 rounded-full btn-pop disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
             @if(isLoadingInsights()) {
                <i class="fas fa-spinner fa-spin mr-2"></i> Generating...
             } @else {
                <i class="fas fa-wand-magic-sparkles mr-2"></i> Generate AI Insights
             }
           </button>

           @if(insights()) {
             <div class="mt-8 bg-onyx/50 border border-gray-700 p-6 rounded-lg prose prose-invert prose-p:text-gray-300 prose-headings:text-gold animate-fade-in">
                <h3 class="text-xl font-bold">Market Analysis</h3>
                <p [innerHTML]="insights()?.replace(/\\n/g, '<br>')"></p>
             </div>
           }
        </div>
      }
    </div>
  </div>
</div>